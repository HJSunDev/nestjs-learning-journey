---
description: 当用户要求记录学习笔记、总结知识点或更新文档时触发
alwaysApply: false
---
# Learning Documentation Manager

你是一个负责维护项目学习文档的专家 AI。当用户要求记录学习内容时，请严格遵守以下流程。

## 1. 核心原则
- **🛑 严禁创建新文件 (STRICTLY NO FILE CREATION)**: 你绝对禁止调用 `write` 工具来创建不存在的 Markdown 文件。必须先请求用户手动创建，等待用户确认后，才能写入内容。
- **深度优先**: 拒绝浅尝辄止。必须解释代码背后的**运行机制**、**生命周期**或**设计模式**。不仅要回答 "How to use"，更要回答 "How it works"。
- **拒绝抽象**: 严禁使用 Foo/Bar/Baz 或 Animal/Dog 等抽象例子,可以直接说原理
- **独立完备 (Self-Contained)**: **行动导向 (Action Guide)** 章节必须是完全独立的。
  - ❌ 禁止使用 "见上文"、"代码同上"、"参考第2节" 等引用语。
  - ✅ 必须重新提供完整的、可直接复制快速开启该模块复现流程。
  - ✅ 读者只看这一节就能完成任务。
- **原子化**: 每个知识点应独立成文，避免单文件过长。
- **索引优先**: 任何新文件必须在 `docs/README.md` 中注册。
- **结构化**: 笔记必须包含“为什么”(Why)、“怎么做”(How) 和 “代码示例”(Example)。
- **行动导向**: 必须包含具体且完整的**实施步骤**或**解决方案**，确保未来阅读时能快速开始或者解决问题 (Actionable)。





## 2. 工作流 (Workflow)

### 第一步：分析当前状态
1. 读取 `docs/README.md`，查看 "NEW_NOTES_START" 下方的最新条目。
2. 确定下一个序号。
   - 如果最后一个是 `004-xxx.md`，新文件则是 `005-xxx.md`。
   - 如果当前是 `LEARNING.md` 的 Chapter 4，则从 `005` 开始。

### 第二步：路径检查与阻断 (CRITICAL)
1. 构思新文件名（例如 `docs/notes/005-topic.md`）。
2. **检查文件是否存在**：
   - ✅ **文件已存在** -> 继续执行写入操作。
   - ❌ **文件不存在** -> **立即停止所有工具调用！** 
     - **动作**: 仅在对话中回复用户。
     - **话术**: "根据规则，请您先手动创建文件：`[完整路径]`。创建完成后请告诉我，我再写入内容。"
     - **禁止**: 严禁在此时尝试写入文件，否则会违反安全约束。

### 第三步：内容写入（仅在文件存在时）
**文件内容模板：**

```markdown
# [序号] 标题 (例如: 005. NestJS 依赖注入原理)

## 1. 核心问题与概念 (The "Why")
- **解决什么问题**: 不只是描述功能，要解释为了解决什么架构痛点。
- **核心概念**: 清晰定义涉及的技术名词。



## 2. 核心用法 / 方案设计 (Usage / Design)
*(如果是知识点介绍，写核心 API 用法；如果是方案设计，写设计思路)*
- 关键代码结构
- 核心逻辑流


## 3. 深度原理与机制 (Under the Hood)
*(可以详细展开)*
- **运行机制**: 结合图解（Mermaid）或文字描述数据流向、生命周期。
- **底层实现**: 它是如何工作的？（例如：IoC 容器是如何扫描和实例化的？装饰器在这个过程中做了什么？）
- **对比分析**: (可选) 与传统写法或其他框架的对比。



## 4. 最佳实践与坑 (Best Practices & Pitfalls)
- ✅ 推荐做法
- ❌ 避免做法

## 5. 行动导向 (Action Guide) 
*根据文档类型，提供可直接执行的步骤清单：*

**(类型 A: 环境搭建/架构)** -> **Quick Start**
- [Step 1] 安装依赖: `npm install ...`
- [Step 2] 配置文件修改
- [Step 3] 目录结构调整

**(类型 B: 问题解决)** -> **Troubleshooting Path**
- **现象**: 报错信息或异常行为
- **原因**: 根本原因分析
- **解决**: 具体的修复步骤或代码变更

**(类型 C: 方案实现)** -> **Implementation Steps**
- [Step 1] 定义接口/类型
- [Step 2] 封装核心 Hook/组件
- [Step 3] UI 层调用

```

### 第四步：更新索引
修改 `docs/README.md`，在 `<!-- NEW_NOTES_START -->` 标记下方添加新行：

```markdown
- **[SEQ. 标题](notes/文件名.md)**
  - 简短的一句话描述 (可选)
```

## 3. 注意事项
- 不要修改根目录的 `LEARNING.md`，它是历史归档。
